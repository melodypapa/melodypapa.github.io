<section id="title">AUTOSAR Memory Access（内存访问）</section>

# 1. 功能规格

本章描述了 **MemAcc** 模块的行为。

## 1.1. 概述

**MemAcc** 模块为不同的上层模块提供与存储设备无关的基于地址的内存访问。它实现了所有高级功能，如：作业管理、访问协调和根据物理分段分配内存驱动程序访问请求，因为内存驱动程序期望所有内存访问与物理段对齐。

## 1.2. 关键方面

* **Fee**、**Ea**、**OTA** 软件更新客户端等不同上层访问协调。
* 内存技术设备不可知，通过 **API** 支持各种内存，甚至包括：代码内存。
* 协调 **CPU** 的不同内核，如：主核和 **HSM** 内核。 
* 内存访问作业管理
* 内存区域的虚拟化，以支持非连续区域的映射以及跨不同内存设备的跨越区域。
* 内存位置到内存设备的映射。
* 根据闪存的页面和扇区等物理段拆分内存驱动程序访问请求。

## 1.3. 功能元素

### 1.3.1. 内存地址转换

**MemAcc** 模块将 **Mem** 驱动的物理内存寻址方案通过逻辑地址空间的方式抽象给上层。

图 7.1 提供了内存地址转换/映射方案的概览：

![Figure7_1](Figure7_1.png)

所有 **MemAcc** 服务，即：擦除、读取和写入，都应支持基于逻辑/物理内存映射跨越内存设备边界的访问请求。

#### 内存映射约束

一个地址区只能分配给一个上层模块。由于每个地址区域只允许一个内存作业，所以地址区域和上层之间存在 **1:1** 的关系。

在一个子地址（**sub-address**）区域内，只允许统一扇区的大小（**uniform sector size**）。

**注意：**

一个子地址区域映射到一个扇区批次。

地址区的起始地址和长度应与物理扇区对齐。

**注意：**

内存访问的起始地址和长度必须与物理分段对齐。

Memory Access Coordination