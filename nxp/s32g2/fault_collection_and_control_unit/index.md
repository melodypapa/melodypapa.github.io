<section id="title">Fault Collection and Control Unit (FCCU)</section>

# 1. 芯片特定的 FCCU 信息

## 1.1. 芯片边界 FCCU 信号

下表列出了该芯片边界上的**FCCU**信号。

| FCCU signal | Chip signal |
| ----------- | ----------- |
| EOUT0       | FCCU_F0     |
| EOUT1       | FCCU_F1     |

## 1.2. 故障映射

所有**FCCU**故障都支持**FCCU**的置位或清除注入。请参阅本文档所附的故障图文件。

## 1.3. 时钟频率

**FCCU SAFECLK**是**RC**振荡器。**RC**振荡器时钟提供独立的时钟源。**RC**振荡器时钟频率为**48**MHz。

## 1.4. FOSU定时器间隔

**FOSU_COUNT**值确定**FOSU**计时器间隔。在这个芯片上，**FOSU_COUNT** = **6_9780h**。

## 1.5. 支持的内部芯片反应

本章提到的短功能复位（**short functional reset**）等同于本文中提到的芯片功能复位（**chip functional reset**）。

## 1.6. 支持的 FCCU EOUT 故障输出模式（协议）

该芯片仅支持**FCCU EOUT**的**Bi-Stable**故障输出模式。本芯片不支持本章提到的其他**EOUT**故障输出模式和协议。

## 1.7. 故障 NCF[21] NoC Mission_Fault_0 的推荐反应

您必须将**NoC Mission_Fault_0**的**NCF**反应配置为仅警报中断（**alarm interrupt**），而不是功能复位。然后您必须在中断子程序中配置软件破坏性复位，以解决芯片的故障状态。

## 1.8. NCFs反应限制

对于以下 NCF，不得将故障反应配置为功能复位：

* 47
* 48
* 49
* 59
* 60
* 61
* 62
* 63

您必须将它们配置为警报中断（**alarm interrupt**）或NMI。在中断子程序中，您可以执行进一步的反应来创建必要的破坏性复位（**destructive reset**）、**PoR**或软件清除（**software clearing**）以清除**NCF**源。

## 1.9. 清除 FCCU 故障

以下是清除**FCCU**故障的步骤：

1. 断言（**assert**） NCFx（通过源/假故障）。
2. 在**FCCU**中设置**NCFx**状态。
3. 等待**FCCU**尝试清除状态。**FCCU**在适当反应后执行此操作。由于额外的管道，需要2-3个周期才能将 NCF 置低（**deassert**）。
4. 通过两次写入**NCF**状态寄存器来清除故障。

# 2. 介绍

**FCCU**提供了一个硬件接口来收集故障并在设备中检测到故障时将设备置于安全状态。收集和控制操作不需要**CPU**干预。**FCCU**提供了一种系统化的故障收集和控制方法。

# 3. 特征

**FCCU**模块的主要特性如下：

* 非关键故障管理
* 硬件或软件故障恢复管理
* 从设备上的安全相关模块收集故障
* 故障注入（假故障）
* 收集测试结果
* 可锁定配置
  * 只能在进入**CONFIG**状态后进行更改
  * 支持临时和永久锁定
  * 看门狗定时器观察到的配置变化
* 可配置的故障控制
* 外部反应（故障状态）：EOUT 信号。通过引脚的错误指示由 FCCU 控制。
* 内部芯片反应（警报状态）：中断请求
* 每个NCF（故障状态）的可配置内部芯片反应：
  * 短功能复位请求脉冲
  * NMI
  * 没有反应
  * 中断请求
* 在双稳态操作模式下，**EOUT**信号之一为高电平表示**FCCU**的操作状态正常。
* 上电后，**EOUT**信号为高阻抗。它们仅在软件配置它们后才指示操作状态。
* 在发生故障事件或软件请求指示错误引脚时，将引脚设置为故障状态并持续最短时间Tmin(see DELTA_T[DELTA_T]),，即使软件之前尝试释放它（对于在 Bi 中配置的错误引脚的情况） - 仅稳定模式）。

自检程序在启动时检查 FCCU 电路。 自检程序完成后，FCCU 立即以默认配置运行。 内部（短功能复位请求脉冲、中断请求）和外部（EOUT 信号）反应是静态定义或可编程的。 默认配置只能在配置（CONFIG）状态下修改。 FCCU 设计为在 CLKPRIM 比 CLKSAFE 时钟快时起作用。

